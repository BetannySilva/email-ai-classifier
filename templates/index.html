<!-- <!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>MailMind AI</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
  <div class="container">
    <h1>üìß MailMind AI</h1>
    <p>Classificador inteligente de e-mails</p>

    <textarea id="email" placeholder="Cole o e-mail aqui..."></textarea>
    <button onclick="classificar()">Classificar</button>

    <div id="loading" class="hidden">Analisando...</div>

    <div id="resultado" class="card hidden">
      <h3>Resultado</h3>
      <p><strong>Categoria:</strong> <span id="categoria"></span></p>
      <p><strong>Resposta sugerida:</strong></p>
      <p id="resposta"></p>
    </div>
  </div>

  <script>
    async function classificar() {
      const email = document.getElementById("email").value;
      if (!email) return alert("Cole um e-mail!");

      document.getElementById("loading").classList.remove("hidden");
      document.getElementById("resultado").classList.add("hidden");

      const res = await fetch("/classificar", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ email })
      });

      const data = await res.json();

      document.getElementById("loading").classList.add("hidden");
      document.getElementById("resultado").classList.remove("hidden");

      document.getElementById("categoria").textContent = data.categoria;
      document.getElementById("resposta").textContent = data.resposta;
    }
  </script>
</body>
</html> -->

<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Classificador de Emails com IA</title>
  <link rel="stylesheet" href="/static/style.css?v=2">
</head>

<body>

  <!-- TOPO -->
  <header class="topo">
    <div class="topo-content">
      <h1 class="title" font-size="large" font-bold text-gray-900>
        <span class="icon">‚ú®</span>
        Classificador de Emails com IA 
      </h1>
      <p class="subtitle">
        Analise seus emails e receba classifica√ß√£o autom√°tica de import√¢ncia
        com sugest√µes de resposta
      </p>
    </div>
  </header>

  <!-- CONTE√öDO -->
  <main>
    <div class="grid">

      <!-- CARD ESQUERDO -->
      <section class="card">
        <h2 class="card-title">
          <span class="mail-icon">‚úâ</span>
          Email para An√°lise
        </h2>

        <textarea id="email" placeholder="Cole o conte√∫do do email aqui (assunto, remetente e corpo)..."></textarea>

        <button class="btn-primary" onclick="classificar()">
          ‚ú® Analisar Email
        </button>
      </section>

      <!-- CARD DIREITO -->
      <section class="card">

       <!-- ESTADO VAZIO -->
<div id="empty" class="empty-state">
  <span class="mail-icon1">‚úâ</span>
  <p id="empty-text">
    Cole um email e clique em "Analisar" para ver os resultados
  </p>
</div>


<!-- RESULTADO (COME√áA ESCONDIDO) -->
<div id="result" class="hidden"><button class="btn-copy" onclick="copiar()">
  <svg class="copy-icon" viewBox="0 0 24 24">
    <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
  </svg>
  Copiar 
</button>
  <p><strong>Categoria:</strong> <span id="categoria"></span></p>

  <h3>Resposta Sugerida</h3>
  <p id="resposta"></p>
 

</div>

      </section>

    </div>
  </main>

  <!-- SCRIPT -->
  <script>
async function classificar() {
  const email = document.getElementById("email").value;

  if (!email.trim()) {
    alert("Cole um email primeiro!");
    return;
  }

  const empty = document.getElementById("empty");
  const emptyText = document.getElementById("empty-text");
  const result = document.getElementById("result");

  // estado: carregando
  emptyText.textContent = "Analisando...";
  empty.classList.remove("hidden");
  result.classList.add("hidden");

  try {
    const res = await fetch("/classificar", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ email })
    });

    if (!res.ok) throw new Error("Erro no servidor");

    const data = await res.json();

    // estado: sucesso
    empty.classList.add("hidden");
    result.classList.remove("hidden");

    document.getElementById("categoria").textContent = data.categoria;
    document.getElementById("resposta").textContent = data.resposta;

  } catch (err) {
    emptyText.textContent = "Erro ao analisar. Tente novamente.";
  }
}

function copiar() {
  const texto = document.getElementById("resposta").innerText;
  navigator.clipboard.writeText(texto);
  alert("Resposta copiada!");
}
</script>


</body>
</html>
